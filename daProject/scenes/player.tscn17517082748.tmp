[gd_scene load_steps=11 format=3 uid="uid://drsri7xs5guyt"]

[ext_resource type="Script" uid="uid://dj34vid5dtxf" path="res://scenes/TemplatePlayerScript.gd" id="1_qhqgy"]
[ext_resource type="Texture2D" uid="uid://dqv77pqw6mcaf" path="res://icon.svg" id="2_qhqgy"]
[ext_resource type="Script" uid="uid://bnri7gjpc5beq" path="res://engine/SignalBroker/signal_broker.gd" id="3_qhqgy"]
[ext_resource type="Script" uid="uid://bo2qd5qc5x753" path="res://engine/Components/COMP_Input.gd" id="4_dqkch"]
[ext_resource type="Script" uid="uid://dle5oiwrprsjs" path="res://engine/StateMachine/State_Machine.gd" id="5_qlg0r"]
[ext_resource type="Script" uid="uid://bjiiemovwwjuy" path="res://engine/Components/COMP_Move.gd" id="5_smehm"]
[ext_resource type="Script" uid="uid://c6kpecf8v63ub" path="res://engine/StateMachine/States/STATE_Idle.gd" id="6_tuyoq"]
[ext_resource type="Script" uid="uid://b26oiib5geh55" path="res://engine/CustomResources/SignalToCall.gd" id="7_fjrip"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_dqkch"]
size = Vector2(128, 128)

[sub_resource type="Resource" id="Resource_smehm"]
script = ExtResource("7_fjrip")
signalName = "CompInput_direction"
functionToCall = "CompMov_Move"
metadata/_custom_type_script = "uid://b26oiib5geh55"

[node name="CharacterBody2D" type="CharacterBody2D"]
script = ExtResource("1_qhqgy")

[node name="Sprite2D" type="Sprite2D" parent="."]
texture = ExtResource("2_qhqgy")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("RectangleShape2D_dqkch")

[node name="SignalBroker" type="Node" parent="."]
script = ExtResource("3_qhqgy")

[node name="ComponentsHolder" type="Node" parent="."]

[node name="InputComponent" type="Node" parent="ComponentsHolder" node_paths=PackedStringArray("signalBroker")]
script = ExtResource("4_dqkch")
signalBroker = NodePath("../../SignalBroker")
signalsToRegister = Array[String](["CompInput_direction"])

[node name="MovementComponent" type="Node" parent="ComponentsHolder" node_paths=PackedStringArray("signalBroker")]
script = ExtResource("5_smehm")
signalBroker = NodePath("../../SignalBroker")
functionsToRegister = Array[String](["HandleMovement"])
metadata/_custom_type_script = "uid://drr18chxkl5kj"

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("signalBroker", "curState")]
script = ExtResource("5_qlg0r")
signalBroker = NodePath("../SignalBroker")
curState = NodePath("Idle")

[node name="Idle" type="Node" parent="StateMachine"]
script = ExtResource("6_tuyoq")
signalsToListen = Array[ExtResource("7_fjrip")]([SubResource("Resource_smehm")])
